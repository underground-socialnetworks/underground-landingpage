{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4bbb28047e554f17f38d","webpack:///./src/utils.js","webpack:///external \"buffer\"","webpack:///./src/index.js","webpack:///./src/cache.js","webpack:///./src/qs.js","webpack:///external \"stream\"","webpack:///external \"url\"","webpack:///external \"https\"","webpack:///external \"http\"","webpack:///external \"form-data\""],"names":["castArray","Array","isArray","value","isObject","isFormData","constructor","toString","trim","indexOf","isStream","stream","require","Stream","qs","CONTENT_TYPE_HEADER","CACHE_FLUSH_INTERVAL","cache","ResponseError","error","status","headers","message","code","Error","parseError","res","body","statusText","parseBody","JSON","parse","e","parseHeaders","headersString","parsed","split","forEach","i","line","key","substr","val","sendXmlHttpRequest","path","method","Promise","sendRequest","resolve","reject","request","Request","XMLHttpRequest","open","toUpperCase","onload","handleLoadEvent","getAllResponseHeaders","response","responseText","onerror","handleErrorEvent","ontimeout","handleTimeout","Object","keys","setRequestHeader","send","sendNodeAPIRequest","encoding","u","form","https","protocol","options","host","hostname","port","_send","Buffer","httpClient","req","strings","buffers","bufferLength","statusCode","statusMessage","on","isBuffer","chunk","push","length","concat","join","pipe","write","end","getHeaders","getLength","err","isNaN","byteLength","checkStatus","responseError","tags","undefined","unwrap","cacheTTL","queryParams","headerName","set","FormData","module","exports","formData","formKey","formValue","hasOwnProperty","append","ttl","reset","deleteByTags","contentType","queryString","stringify","cached","get","type","isJSON","unwrapBody","cacheResponse","flushCache","verbose","console","log","decodeURIComponent","then","successHandler","errorHandler","promise","catch","defineProperty","sender","methods","DEFAULT_TTL","cacheItem","currentTime","Date","getTime","tagsMatches","a","b","result","RegExp","test","tagsContainMatches","find","aTag","bTag","Cache","flushInterval","map","Map","delete","flushTimer","setInterval","flush","bind","unref","now","tokens","obj","encodeURIComponent"],"mappings":"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","file":"backendless-request.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"BackendlessRequest\"] = factory();\n\telse\n\t\troot[\"BackendlessRequest\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4bbb28047e554f17f38d","/**\n * Casts `value` as an array if it's not one.\n * Equvivalent to lodash/castArray\n */\nexport const castArray = value => {\n  return Array.isArray(value) ? value : [value]\n}\n\nexport const isObject = value => null != value && typeof value === 'object'\n\nexport const isFormData = value => {\n  return value && value.constructor && value.constructor.toString().trim().indexOf('function FormData') === 0\n}\n\nexport const isStream = value => {\n  const stream = require('stream')\n\n  return value instanceof stream.Stream\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"buffer\"\n// module id = 1\n// module chunks = 0","import Cache from './cache'\nimport * as qs from './qs'\nimport { castArray, isObject, isFormData, isStream } from './utils'\n\nconst CONTENT_TYPE_HEADER = 'Content-Type'\nconst CACHE_FLUSH_INTERVAL = 60000 //60 sec\n\nconst cache = new Cache(CACHE_FLUSH_INTERVAL)\n\nclass ResponseError extends Error {\n  constructor(error, status, headers) {\n    super()\n\n    this.status = status\n    this.headers = headers\n    this.message = error.message || error\n    this.code = error.code\n  }\n}\n\nfunction parseError(res) {\n  if (res.status === 502) {\n    return 'No connection with server'\n  }\n\n  return res.body || `Status Code ${res.status} (${res.statusText})`\n}\n\nfunction parseBody(res) {\n  try {\n    return { ...res, body: JSON.parse(res.body) }\n  } catch (e) {\n    return res\n  }\n}\n\nfunction parseHeaders(headersString) {\n  const parsed = {}\n\n  if (!headersString) {\n    return parsed\n  }\n\n  headersString.split('\\n').forEach(line => {\n    const i = line.indexOf(':')\n    const key = line.substr(0, i).trim()\n    const val = line.substr(i + 1).trim()\n\n    if (key) {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val\n    }\n  })\n\n  return parsed\n}\n\nconst sendXmlHttpRequest = (path, method, headers, body) => {\n  return new Promise(function sendRequest(resolve, reject) {\n    let request = new Request.XMLHttpRequest()\n\n    request.open(method.toUpperCase(), path, true)\n\n    request.onload = function handleLoadEvent() {\n      const headers = parseHeaders(request.getAllResponseHeaders())\n      const { status, statusText, response, responseText } = request\n      const body = response || responseText\n\n      resolve({ status, statusText, headers, body })\n\n      request = null\n    }\n\n    request.onerror = function handleErrorEvent() {\n      reject(new Error('Network Error'))\n\n      request = null\n    }\n\n    request.ontimeout = function handleTimeout() {\n      reject(new Error('Connection aborted due to timeout'))\n\n      request = null\n    }\n\n    Object.keys(headers).forEach(key => {\n      request.setRequestHeader(key, headers[key])\n    })\n\n    request.send(body)\n  })\n}\n\nconst sendNodeAPIRequest = (path, method, headers, body, encoding) => {\n  return new Promise((resolve, reject) => {\n    const u = require('url').parse(path)\n    const form = isFormData(body) && body\n\n    const https = u.protocol === 'https:'\n    const options = {\n      host   : u.hostname,\n      port   : u.port || (https ? 443 : 80),\n      method : method,\n      path   : u.path,\n      headers: headers\n    }\n\n    const _send = () => {\n      const Buffer = require('buffer').Buffer\n      const httpClient = require(https ? 'https' : 'http')\n\n      const req = httpClient.request(options, res => {\n        const  strings =[]\n        const  buffers =[]\n        let bufferLength = 0\n        let body = ''\n\n        const { statusCode: status, statusMessage: statusText, headers } = res\n\n        res.on('data', chunk => {\n          if (!Buffer.isBuffer(chunk)) {\n            strings.push(chunk)\n\n          } else if (chunk.length) {\n            bufferLength += chunk.length\n            buffers.push(chunk)\n          }\n        })\n\n        res.on('end', () => {\n          if (bufferLength) {\n            body = Buffer.concat(buffers, bufferLength)\n\n            if (encoding != null) {\n              body = body.toString(encoding)\n            }\n\n          } else if (strings.length) {\n            body = strings.join()\n          }\n\n          resolve({ status, statusText, headers, body })\n        })\n\n        res.on('error', reject)\n      })\n\n      req.on('error', reject)\n\n      if (body) {\n        if (isStream(body)) {\n          body.pipe(req)\n          return\n        }\n\n        req.write(body)\n      }\n\n      req.end()\n    }\n\n    if (form) {\n      Object.assign(options.headers, form.getHeaders())\n\n      form.getLength(function(err, length) {\n        if (!err && !isNaN(length)) {\n          options.headers['content-length'] = length\n        }\n\n        _send()\n      })\n    } else {\n      if (body && !options.headers['content-length']) {\n        const Buffer = require('buffer').Buffer\n        options.headers['content-length'] = Buffer.byteLength(body)\n      }\n\n      _send()\n    }\n  })\n}\n\n/**\n * Checks if a network request came back fine, and throws an error if not\n *\n * @param  {object} response   A response from a network request\n *\n * @return {object|undefined} Returns either the response, or throws an error\n */\nfunction checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response\n  }\n\n  const responseError = new ResponseError(parseError(response), response.status, response.headers)\n\n  return Promise.reject(responseError)\n}\n\nclass Request {\n\n  constructor(path, method, body) {\n    this.method = method\n    this.path = path\n    this.body = body\n    this.tags = undefined\n    this.unwrap = true\n    this.cacheTTL = 0\n    this.headers = {}\n    this.queryParams = {}\n    this.encoding = 'utf8'\n  }\n\n  /**\n   * Sets a header\n   *\n   * @param {String|Object} key or map of headers\n   * @param {String} [value]\n   * @returns {Request}\n   */\n  set(key, value) {\n    if (isObject(key)) {\n      for (const headerName in key) {\n        this.set(headerName, key[headerName])\n      }\n    } else if (typeof value !== 'undefined'){\n      this.headers[key] = value\n    }\n\n    return this\n  }\n\n  /**\n   * Which kind of tags this request affects.\n   * Used for cache validation.\n   * Non GET requests with defined tags, will clean all related to these tags caches\n   *\n   * @param {Array.<String>} tags\n   * @returns {Request}\n   */\n  cacheTags(...tags) {\n    this.tags = tags\n\n    return this\n  }\n\n  /**\n   * @param {String} queryParams\n   * @returns {Request}\n   */\n  query(queryParams) {\n    Object.assign(this.queryParams, queryParams)\n\n    return this\n  }\n\n  form(form) {\n    if (form) {\n      const FormData = module.exports.FormData\n\n      if (form instanceof FormData) {\n        this.body = form\n      } else {\n        const formData = new FormData()\n\n        for (const formKey in form) {\n          if (formKey) {\n            castArray(form[formKey]).forEach(formValue => {\n              if (formValue && formValue.hasOwnProperty('value') && formValue.hasOwnProperty('options')) {\n                formData.append(formKey, formValue.value, formValue.options)\n              } else {\n                formData.append(formKey, formValue)\n              }\n            })\n          }\n        }\n\n        this.body = formData\n      }\n    }\n\n    return this\n  }\n\n  /**\n   * Should we cache or use cached result\n   *\n   * @param {Number} ttl Time to live for cached response. 15 seconds by default\n   * @returns {Request}\n   */\n  useCache(ttl = 15000) {\n    this.cacheTTL = ttl\n\n    return this\n  }\n\n  /**\n   * Reset cache if passed TRUE and tags has been specified before\n   *\n   * @param {Boolean} reset - flag to reset cache or not\n   * @returns {Request}\n   */\n  resetCache(reset) {\n    if (reset && this.tags) {\n      cache.deleteByTags(this.tags)\n    }\n\n    return this\n  }\n\n  /**\n   * Shortcut for req.set('Content-Type', value)\n   *\n   * @param {String} contentType\n   * @returns {Request}\n   */\n  type(contentType) {\n    this.set(CONTENT_TYPE_HEADER, contentType)\n\n    return this\n  }\n\n  /**\n   * Should we unwrap the response and return only body. true by default\n   * @param {Boolean} unwrap\n   * @returns {Request}\n   */\n  unwrapBody(unwrap) {\n    this.unwrap = unwrap\n\n    return this\n  }\n\n  /**\n   * set encoding to response\n   * works only for Node js\n   *\n   * @param {String} encoding\n   * @returns {Request}\n   */\n  setEncoding(encoding){\n    this.encoding = encoding\n\n    return this\n  }\n\n  /**\n   * Sends the requst\n   *\n   * @param {Object} body\n   * @returns {Promise}\n   */\n  send(body) {\n    let path = this.path\n    const queryString = qs.stringify(this.queryParams)\n\n    if (queryString) {\n      path += '?' + queryString\n    }\n\n    if (this.cacheTTL) {\n      const cached = cache.get(path)\n\n      if (cached !== undefined) {\n        return Promise.resolve(cached)\n      }\n    }\n\n    const type = this.headers[CONTENT_TYPE_HEADER]\n\n    if (!type && isObject(body) && !isFormData(body)) {\n      this.type('application/json')\n    }\n\n    if (body) {\n      const isJSON = this.headers[CONTENT_TYPE_HEADER] === 'application/json'\n\n      body = (isJSON && typeof body !== 'string') ? JSON.stringify(body) : body\n    }\n\n    const unwrapBody = res => {\n      return this.unwrap ? res.body : res\n    }\n\n    /**\n     * Caches the response if required\n     */\n    const cacheResponse = res => {\n      if (this.cacheTTL) {\n        cache.set(path, res, this.tags, this.cacheTTL)\n      }\n\n      return res\n    }\n\n    /**\n     * Deletes all relevant to req.cacheTags keys from the cache if this request method is not GET\n     */\n    const flushCache = res => {\n      if (this.tags && this.method !== 'get') {\n        cache.deleteByTags(this.tags)\n      }\n\n      return res\n    }\n\n    if (Request.verbose) {\n      console.log(this.method.toUpperCase(), decodeURIComponent(path), body, this.headers)\n    }\n\n    return Request.send(path, this.method.toUpperCase(), this.headers, body, this.encoding)\n      .then(parseBody)\n      .then(checkStatus)\n      .then(unwrapBody)\n      .then(cacheResponse)\n      .then(flushCache)\n  }\n\n  /**\n   * If you are too lazy to use method 'send', don't use it and stay cool :)\n   *\n   * @param {Function} successHandler\n   * @param {Function} errorHandler\n   * @returns {Promise}\n   */\n  then(successHandler, errorHandler) {\n    this.promise = this.promise || this.send(this.body)\n\n    return this.promise.then(successHandler, errorHandler)\n  }\n\n  /**\n   * @param {Function} errorHandler\n   * @returns {Promise}\n   */\n  catch(errorHandler) {\n    this.promise = this.promise || this.send(this.body)\n\n    return this.promise.catch(errorHandler)\n  }\n}\n\nObject.defineProperty(Request, 'FormData', {\n  get() {\n    return typeof FormData !== 'undefined' ? FormData : require('form-data')\n  }\n})\n\nRequest.XMLHttpRequest = typeof XMLHttpRequest !== 'undefined' ? XMLHttpRequest : undefined\n\nRequest.send = (path, method, headers, body, encoding) => {\n  const sender = typeof Request.XMLHttpRequest !== 'undefined'\n    ? sendXmlHttpRequest\n    : sendNodeAPIRequest\n\n  return sender(path, method, headers, body, encoding)\n}\n\nRequest.verbose = false\nRequest.methods = ['get', 'post', 'put', 'patch', 'delete']\n\nRequest.methods.forEach(method => {\n  Request[method] = function(path, body) {\n    return new Request(path, method, body)\n  }\n})\n\nmodule.exports = Request\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","const DEFAULT_TTL = 30000 // 30 sec\n\n/**\n * @typedef {Object} CacheItem\n * @property {*} value\n * @property {Array.<RegExp|String>} tags\n * @property {Number} ttl\n */\n\n/**\n * @param {*} value\n * @param {Array.<RegExp|String>}tags\n * @param {Number} ttl\n * @returns {CacheItem}\n */\nconst cacheItem = (value, tags, ttl) => ({ value, tags, ttl })\n\nconst currentTime = () => new Date().getTime()\n\n/**\n * Returns true if tag A matches tag B :\n *  - if they are non-strictly equal\n *  - if one of them is Regexp matching the opposite\n *\n * @param {String|RegExp} a\n * @param {String|RegExp} b\n * @returns {Boolean}\n */\nconst tagsMatches = (a, b) => {\n  let result = a == b // eslint-disable-line\n\n  if (!result && a instanceof RegExp) {\n    result = a.test(b)\n  }\n\n  if (!result && b instanceof RegExp) {\n    result = b.test(a)\n  }\n\n  return result\n}\n\n/**\n * Returns true if any of A tags matches any of B tags\n *\n * @param {Array.<String|RegExp>} a\n * @param {Array.<String|RegExp>} b\n * @returns {Boolean}\n */\nconst tagsContainMatches = (a, b) => {\n  return !!a.find(aTag => b.find(bTag => tagsMatches(aTag, bTag)))\n}\n\n\n/**\n * A Cache with TTL and optional tags for the keys\n * Makes it possible to assign multiple tags for a key and delete keys by tags\n * Optionally it starts flushing timer which cleans all outdated keys\n */\nexport default class Cache {\n\n  /**\n   * @param {Number?} flushInterval\n   */\n  constructor(flushInterval) {\n    this.flushInterval = flushInterval\n\n    /**\n     * @type {Map.<String, CacheItem>}\n     */\n    this.map = new Map()\n  }\n\n  /**\n   * @param {String} key\n   * @returns {*}\n   */\n  get(key) {\n    const cacheItem = this.map.get(key)\n\n    if (cacheItem) {\n      if (cacheItem.ttl > currentTime()) {\n        return cacheItem.value\n      } else {\n        this.map.delete(key)\n      }\n    }\n  }\n\n  /**\n   * @param {String} key\n   * @param {*} value\n   * @param {Array.<RegExp|String>=} tags\n   * @param {Number=} ttl\n   */\n  set(key, value, tags, ttl = DEFAULT_TTL) {\n    this.map.set(key, cacheItem(value, tags, currentTime() + ttl))\n\n    if (this.flushInterval && !this.flushTimer) {\n      this.flushTimer = setInterval(this.flush.bind(this), this.flushInterval)\n\n      if (this.flushTimer.unref) {\n        this.flushTimer.unref()\n      }\n    }\n  }\n\n  /**\n   * @param {String} key\n   */\n  delete(key) {\n    this.map.delete(key)\n  }\n\n  /**\n   * @param {Array.<String>} tags\n   */\n  deleteByTags(tags) {\n    for (const [key, value] of this.map) {\n      if (value.tags && tagsContainMatches(tags, value.tags)) {\n        this.delete(key)\n      }\n    }\n  }\n\n  /**\n   * Deletes all outdated keys\n   */\n  flush() {\n    const now = currentTime()\n\n    for (const [key, value] of this.map) {\n      if (value.ttl < now) {\n        this.delete(key)\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cache.js","import { castArray } from './utils'\n\n/**\n * Produces a URL query string from a given obj by iterating through the object's \"own properties\".\n * @param {Object} obj\n * @returns {string}\n */\nexport const stringify = obj => {\n  const tokens = []\n\n  Object.keys(obj).forEach(key => {\n    const value = obj[key]\n\n    if (value !== undefined) {\n      castArray(value).forEach(value => {\n        tokens.push(`${ encodeURIComponent(key) }=${ encodeURIComponent(value) }`)\n      })\n    }\n  })\n\n  return tokens.join('&')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/qs.js","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"stream\"\n// module id = 5\n// module chunks = 0","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 6\n// module chunks = 0","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"https\"\n// module id = 7\n// module chunks = 0","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 8\n// module chunks = 0","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"form-data\"\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}